import{a as u}from"./chunk-6LYHESDV.js";import{a as k,c as A}from"./chunk-ZUJZEK4Q.js";import{c as g}from"./chunk-2UOUZDNQ.js";import{a as T}from"./chunk-PZSFEQ4E.js";import{a as j}from"./chunk-PHYEHXVE.js";import{Da as c,Fa as v,Pa as D,R as d,Ra as S,W as p,X as l,Za as I,ea as w,eb as E,fa as _,ka as h,la as a,ma as i,na as o,nb as F,va as P,yb as B}from"./chunk-4MU7JTCM.js";var C=class r{constructor(t){this.transactionsService=t}pieChartData={labels:[],datasets:[]};pieChartOptions={responsive:!0,plugins:{legend:{position:"bottom",labels:{color:"#333"}},tooltip:{callbacks:{label:t=>{let e=t.label||"",n=t.raw;return`${e}: ${n}`}}}}};ngOnInit(){this.transactionsService.getExpenseSummary().subscribe({next:t=>{this.pieChartData={labels:t.labels,datasets:[{data:t.values,label:"Expense Summary",backgroundColor:this.generateColors(t.labels.length)}]},console.log("Chart data:",this.pieChartData)},error:t=>console.error("Failed to load expense summary",t)})}generateColors(t){let e=["#FF6384","#36A2EB","#FFCE56","#4BC0C0","#9966FF","#F7464A","#46BFBD","#FDB45C","#949FB1","#4D5360","#C9CBCF","#8E44AD","#2ECC71","#E67E22","#1ABC9C"];return Array.from({length:t},(n,s)=>e[s%e.length])}static \u0275fac=function(e){return new(e||r)(p(u))};static \u0275cmp=l({type:r,selectors:[["app-expense-chart"]],decls:11,vars:3,consts:[[1,"card","chart-container"],[1,"card-body"],[1,"card-title"],[1,"chart-wrapper"],[1,"description"],[1,"chart-canvas"],["baseChart","","height","250","width","250",3,"data","options","type"]],template:function(e,n){e&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4"),c(4,"Main Expenses"),i()(),a(5,"div",3)(6,"div",4)(7,"p"),c(8,"A look into your expense summary."),i()(),a(9,"div",5),o(10,"canvas",6),i()()()()),e&2&&(d(10),h("data",n.pieChartData)("options",n.pieChartOptions)("type","doughnut"))},dependencies:[g],styles:[".chart-container[_ngcontent-%COMP%]{padding:10px;box-shadow:2px 2px 2px #00000040}h4[_ngcontent-%COMP%]{text-align:center}.chart-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.description[_ngcontent-%COMP%]{text-align:center;font-size:14px;color:gray;margin-top:5px;max-width:230px}@media (max-width: 320px){.chart-container[_ngcontent-%COMP%]{width:100%;padding:0;box-shadow:3px 3px #00000040}.chart-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center}}@media (min-width: 769px) and (max-width: 1024px){.chart-container[_ngcontent-%COMP%]{height:100%;width:100%;display:flex;justify-content:center;align-items:center}.chart-wrapper[_ngcontent-%COMP%]{height:90%;width:90%}}@media (min-width: 321px) and (max-width: 768px){.chart-container[_ngcontent-%COMP%]{width:100%;padding:0;box-shadow:3px 3px #00000040}.chart-wrapper[_ngcontent-%COMP%]{height:90%;width:90%}}"]})};var x=class r{constructor(t){this.transactionsService=t}pieChartData={labels:[],datasets:[]};pieChartOptions={responsive:!0,plugins:{legend:{position:"bottom",labels:{color:"#333"}},tooltip:{callbacks:{label:t=>{let e=t.label||"",n=t.raw;return`${e}: ${n}`}}}}};ngOnInit(){this.transactionsService.getIncomeSummary().subscribe({next:t=>{this.pieChartData={labels:t.labels,datasets:[{data:t.values,label:"Income Summary",backgroundColor:this.generateColors(t.labels.length)}]},console.log("Income chart data:",this.pieChartData)},error:t=>console.error("Failed to load income summary",t)})}generateColors(t){let e=["#4CAF50","#2196F3","#FFC107","#FF5722","#9C27B0","#00BCD4","#8BC34A","#CDDC39","#FF9800","#795548","#607D8B","#E91E63","#3F51B5","#009688","#673AB7"];return Array.from({length:t},(n,s)=>e[s%e.length])}static \u0275fac=function(e){return new(e||r)(p(u))};static \u0275cmp=l({type:r,selectors:[["app-income-chart"]],decls:11,vars:3,consts:[[1,"card","chart-container"],[1,"card-body"],[1,"card-title"],[1,"chart-wrapper"],[1,"description"],[1,"chart-canvas"],["baseChart","","height","250","width","250",3,"data","options","type"]],template:function(e,n){e&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4"),c(4,"Main Income"),i()(),a(5,"div",3)(6,"div",4)(7,"p"),c(8,"A look into your income summary."),i()(),a(9,"div",5),o(10,"canvas",6),i()()()()),e&2&&(d(10),h("data",n.pieChartData)("options",n.pieChartOptions)("type","doughnut"))},dependencies:[g],styles:[".income-chart-container[_ngcontent-%COMP%]{padding:10px;box-shadow:2px 2px 2px #00000040;display:flex;flex-direction:row;justify-content:center;align-items:center}h4[_ngcontent-%COMP%]{text-align:center}.chart-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.description[_ngcontent-%COMP%]{text-align:center;font-size:14px;color:gray;margin-top:5px;max-width:230px}@media (max-width: 320px){.income-chart-container[_ngcontent-%COMP%]{width:100%;padding:0;box-shadow:3px 3px #00000040}.chart-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center}}@media (min-width: 769px) and (max-width: 1024px){.income-chart-container[_ngcontent-%COMP%]{height:100%;width:100%;display:flex;justify-content:center;align-items:center}.chart-wrapper[_ngcontent-%COMP%]{height:90%;width:90%}}"]})};var f=class r{chartType="bar";spendingChartData;chartOptions={responsive:!0,maintainAspectRatio:!1};ngOnInit(){this.setupSpendingChart()}setupSpendingChart(){let t=["January","February","March","April","May","June","July"],e={labels:t,datasets:[{label:"Spending Over Time",data:[1200,1500,1e3,1700,1300,1600,1800],backgroundColor:"rgba(54, 162, 235, 0.4)"}]};this.spendingChartData={labels:t,datasets:e.datasets}}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=l({type:r,selectors:[["app-spending-chart"]],decls:9,vars:3,consts:[[1,"spending-chart-container"],[1,"card"],[1,"card-header","p-4"],[1,"card-body"],[1,"chart-scroll-container"],[1,"chart-container"],["baseChart","","width","700","height","150",3,"data","type","options"]],template:function(e,n){e&1&&(a(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4"),c(4,"Spending Overview"),i()(),a(5,"div",3)(6,"div",4)(7,"div",5),o(8,"canvas",6),i()()()()()),e&2&&(d(8),h("data",n.spendingChartData)("type",n.chartType)("options",n.chartOptions))},dependencies:[g],styles:[".spending-chart-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:1rem}.spending-chart-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .chart-scroll-container[_ngcontent-%COMP%]{max-height:600px;overflow-y:auto;-webkit-overflow-scrolling:touch;padding-right:8px}.spending-chart-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .chart-container[_ngcontent-%COMP%]{width:100%;box-sizing:border-box}.spending-chart-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{width:100%!important;height:auto!important;min-height:320px;display:block}.chart-scroll-container[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.chart-scroll-container[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.chart-scroll-container[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#00000014;border-radius:6px}@media (max-width: 768px){.spending-chart-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .chart-scroll-container[_ngcontent-%COMP%]{max-height:260px}.spending-chart-container[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{min-height:240px}}"]})};function z(r,t){if(r&1&&(a(0,"h2"),c(1),i()),r&2){let e=P();d(),v("Hello, ",e.username,"!")}}function J(r,t){r&1&&(a(0,"p",5),o(1,"span",11),i())}var N=class r{constructor(t,e,n,s){this.auth=t;this.http=e;this.cd=n;this.router=s}username=null;remainingBudget=0;ngOnInit(){this.auth.getProfile().subscribe({next:s=>{s.success&&s.data&&(this.username=s.data.username,this.cd.detectChanges())},error:()=>{this.auth.logout(),this.router.navigate(["/login-page"])}});let t=this.auth.getToken(),e=`${j.apiUrl}/transactions`,n={Authorization:`Bearer ${t}`};this.http.get(e,{headers:n}).subscribe({next:s=>{let M=s.data,R=M.filter(m=>m.type==="income").reduce((m,b)=>m+b.amount,0),$=M.filter(m=>m.type==="expense").reduce((m,b)=>m+b.amount,0);this.remainingBudget=R-$,this.cd.detectChanges()},error:()=>{console.error("Failed to load transactions for balance")}})}static \u0275fac=function(e){return new(e||r)(p(T),p(F),p(I),p(B))};static \u0275cmp=l({type:r,selectors:[["app-dashboard"]],decls:21,vars:5,consts:[[1,"dashboard-container"],[1,"content-container"],[1,"card"],[1,"card-body"],[1,"budget-info-container"],[1,"placeholder-glow"],[1,"budget-num-container"],[1,"budget"],[1,"expense-chart-panel"],[1,"income-chart-panel"],[1,"spending-panel"],[1,"placeholder","col-12"]],template:function(e,n){e&1&&(o(0,"app-sidebar")(1,"app-header"),a(2,"main",0)(3,"div",1)(4,"div",2)(5,"div",3)(6,"div",4),w(7,z,2,1,"h2")(8,J,2,0,"p",5),a(9,"p"),c(10,"Your remaining budget is"),i()(),a(11,"div",6)(12,"h3",7),c(13),D(14,"number"),i()()()(),a(15,"div",8),o(16,"app-expense-chart"),i(),a(17,"div",9),o(18,"app-income-chart"),i(),a(19,"div",10),o(20,"app-spending-chart"),i()()()),e&2&&(d(7),_(n.username?7:8),d(6),v("\u20B1",S(14,2,n.remainingBudget,"1.2-2")))},dependencies:[k,A,x,C,f,E],styles:['main[_ngcontent-%COMP%]{margin-left:100px;background-color:#e8e9eb;padding:10px;height:auto;min-height:100vh}.content-container[_ngcontent-%COMP%]{padding:10px;min-height:100vh;display:grid;grid-template-areas:"item1 item1" "item2 item3" "item4 item4";gap:.5em}.card[_ngcontent-%COMP%]{width:95%;height:12em;max-height:12em;box-shadow:2px 2px 3px #00000040;grid-area:item1;margin:0 auto;align-self:start}.expense-chart-panel[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;grid-area:item2}.income-chart-panel[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;grid-area:item3}.spending-panel[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;grid-area:item4;width:100%}.card-body[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;padding:30px}.budget-num-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-end}.budget[_ngcontent-%COMP%]{color:#3498db}@media (max-width: 768px){.content-container[_ngcontent-%COMP%]{margin-left:0;grid-template-areas:"item1" "item2" "item3" "item4";gap:3em;height:100%;width:auto;justify-content:center}.card[_ngcontent-%COMP%]{width:85%;height:10em;max-height:10em;display:flex;justify-content:center;align-items:center}.expense-chart-panel[_ngcontent-%COMP%], .income-chart-panel[_ngcontent-%COMP%]{height:auto;width:auto}.history-panel[_ngcontent-%COMP%]{width:auto;height:auto}.budget-info-container[_ngcontent-%COMP%]{text-align:center;grid-area:header-part}.budget-num-container[_ngcontent-%COMP%]{text-align:center;grid-area:content-part}.budget-num-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin-bottom:0}.card-body[_ngcontent-%COMP%]{display:grid;grid-template-areas:"header-part" "content-part"}}@media (min-width: 769px) and (max-width: 1440px){main[_ngcontent-%COMP%]{margin-left:100px;background-color:#e8e9eb;padding:10px;height:auto;min-height:100vh;display:flex;flex-direction:column;justify-content:center}.content-container[_ngcontent-%COMP%]{grid-template-areas:"item1 item1" "item2 item3" "item4 item4";height:100%;width:100%;justify-content:center;align-items:center}.card[_ngcontent-%COMP%]{width:100%;height:11em;max-height:11em;margin:auto}.card-body[_ngcontent-%COMP%]{display:flex;flex-direction:row}.expense-chart-panel[_ngcontent-%COMP%], .income-chart-panel[_ngcontent-%COMP%]{height:auto;width:auto}.history-panel[_ngcontent-%COMP%]{width:auto;height:auto}}@media (max-width: 320px){main[_ngcontent-%COMP%]{margin-left:0;padding:10px;width:auto!important}.card[_ngcontent-%COMP%]{width:300px;height:10em!important;max-height:10em!important}}@media (min-width: 321px) and (max-width: 768px){main[_ngcontent-%COMP%]{margin-left:0;padding:10px;width:auto!important}.card[_ngcontent-%COMP%]{width:100%;height:10em!important;max-height:10em!important}}']})};export{N as Dashboard};
