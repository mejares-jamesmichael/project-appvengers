import{a as S,b as A0}from"./chunk-VYMAGPRH.js";import{a as k}from"./chunk-LN244XIN.js";import{a as C0,c as H0}from"./chunk-ZUJZEK4Q.js";import"./chunk-PZSFEQ4E.js";import{a as _,b as g,c as T,d as R,g as I,h as N,j as U,k as G,l as Q,m as O,n as j,o as W,q as X,s as F}from"./chunk-DUKZIXU3.js";import"./chunk-PHYEHXVE.js";import{A as V,Aa as m0,C as w,D as r0,Da as r,E as c,Ea as d0,F as n,Fa as P,H as p0,L as u,La as M0,M as w0,O as e0,P as g0,R as i,V as c0,Va as z0,Wa as x0,X as M,Xa as Z,Ya as x,a as E,ea as n0,fa as i0,ga as H,i as v0,ia as A,ib as V0,ja as f,ka as z,la as v,ma as h,na as e,ta as B,ua as m,va as a0,wa as b,xa as L,y as s0,ya as q,yb as u0}from"./chunk-4MU7JTCM.js";var y=class o{EXPENSE_CATEGORIES=[{category_id:1,name:"Housing",type:"expense"},{category_id:2,name:"Transportation",type:"expense"},{category_id:3,name:"Utilities",type:"expense"},{category_id:4,name:"Insurance",type:"expense"},{category_id:5,name:"Healthcare",type:"expense"},{category_id:6,name:"Food",type:"expense"},{category_id:7,name:"Other",type:"expense"}];getExpenseCategories(){return[...this.EXPENSE_CATEGORIES]}static \u0275fac=function(l){return new(l||o)};static \u0275prov=s0({token:o,factory:o.\u0275fac,providedIn:"root"})};var F0=["addBudgetModal"],S0=["openAddBudgetModalBtn"];function k0(o,a){if(o&1&&(v(0,"option",14),r(1),h()),o&2){let l=a.$implicit;z("value",l.category_id),i(),d0(l.name)}}var J=class o{addBudgetModal;openAddBudgetModalBtn;budgetForm;addedBudget=Z();formBuilder=w(X);mockupService=w(S);mockBudgetId=x(0);categoriesService=w(y);categories=u([]);currentCategoryName=u("");currentCategoryId=u(0);constructor(){this.budgetForm=this.formBuilder.group({id:[],category_id:["",{validators:[g.required]}],category_name:[""],limit_amount:[0,{validators:[g.required]}],current_amount:[0],start_date:["",{validators:[g.required]}],end_date:["",{validators:[g.required]}]})}ngOnInit(){let a=this.mockBudgetId();this.categories.set(this.categoriesService.getExpenseCategories()),this.budgetForm=this.formBuilder.group({id:[a],category_id:["",{validators:[g.required]}],category_name:[""],limit_amount:[0,{validators:[g.required]}],current_amount:[0],start_date:["",{validators:[g.required]}],end_date:["",{validators:[g.required]}]})}ngOnChanges(a){if(a.mockBudgetId){let l=a.mockBudgetId.currentValue;this.budgetForm=this.formBuilder.group({id:[l],category_id:["",{validators:[g.required]}],category_name:[""],limit_amount:[0,{validators:[g.required]}],current_amount:[0],start_date:["",{validators:[g.required]}],end_date:["",{validators:[g.required]}]})}}openModal(){new k(this.addBudgetModal.nativeElement).show()}closeModal(){k.getInstance(this.addBudgetModal.nativeElement)?.hide(),this.budgetForm.reset(),this.budgetForm.patchValue({id:this.mockBudgetId()}),this.openAddBudgetModalBtn.nativeElement.focus()}addBudget(){this.budgetForm.invalid||this.mockupService.addMockBudget(this.budgetForm.value).subscribe(a=>{this.addedBudget.emit(a),console.log("Added Budget:",a),this.closeModal()})}afterCategorySelection(){let a=Number(this.budgetForm.get("category_id")?.value),l=this.categories().find(t=>t.category_id===a);this.budgetForm.get("category_name")?.setValue(l?.name??""),this.currentCategoryId.set(a),this.currentCategoryName.set(l?.name??"")}static \u0275fac=function(l){return new(l||o)};static \u0275cmp=M({type:o,selectors:[["app-add-budget-button"]],viewQuery:function(l,t){if(l&1&&(b(F0,5),b(S0,5)),l&2){let s;L(s=q())&&(t.addBudgetModal=s.first),L(s=q())&&(t.openAddBudgetModalBtn=s.first)}},inputs:{mockBudgetId:[1,"mockBudgetId"]},outputs:{addedBudget:"addedBudget"},features:[w0],decls:39,vars:2,consts:[["addBudgetModal",""],["openAddBudgetModalBtn",""],["data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1",1,"modal","fade"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title","fs-5"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[3,"formGroup"],["type","hidden","formControlName","id",3,"value"],["for","category_name"],["formControlName","category_id","id","category_name",1,"form-select","mb-3",3,"change"],["value","","selected","","disabled",""],[3,"value"],["for","limit_amount"],[1,"input-group","mb-3"],[1,"input-group-text","fw-bold"],["formControlName","limit_amount","id","limit_amount","type","number","min","0",1,"form-control"],["for","start_date"],["formControlName","start_date","id","start_date","type","date",1,"form-control","mb-3"],["for","end_date"],["formControlName","end_date","id","end_date","type","date",1,"form-control","mb-3"],["formControlName","current_amount","type","hidden","value","0"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"]],template:function(l,t){if(l&1){let s=B();v(0,"div",2,0)(2,"div",3)(3,"div",4)(4,"div",5)(5,"h1",6),r(6,"Add Budget"),h(),v(7,"button",7),m("click",function(){return c(s),n(t.closeModal())}),h()(),v(8,"div",8)(9,"form",9),e(10,"input",10),v(11,"label",11),r(12,"Category"),h(),v(13,"select",12),m("change",function(){return c(s),n(t.afterCategorySelection())}),v(14,"option",13),r(15,"-- Select Category --"),h(),A(16,k0,2,2,"option",14,H),h(),v(18,"label",15),r(19,"Set Budget"),h(),v(20,"div",16)(21,"span",17),r(22,"\u20B1"),h(),e(23,"input",18),h(),v(24,"label",19),r(25,"Start Date"),h(),e(26,"input",20),v(27,"label",21),r(28,"End Date"),h(),e(29,"input",22)(30,"input",23),h()(),v(31,"div",24)(32,"button",25),m("click",function(){return c(s),n(t.closeModal())}),r(33," Close "),h(),v(34,"button",26),m("click",function(){return c(s),n(t.addBudget())}),r(35,"Add Budget"),h()()()()(),v(36,"button",26,1),m("click",function(){return c(s),n(t.openModal())}),r(38,` Set New Budget
`),h()}l&2&&(i(9),z("formGroup",t.budgetForm),i(),z("value",t.mockBudgetId()),i(6),f(t.categories()))},dependencies:[F,I,O,j,_,N,Q,T,R,W,U,G],encapsulation:2})};function y0(o){return o==null?"":/^\d+$/.test(o)?`${o}px`:o}var E0=new V("Ng Icon Pre Processor"),P0=new V("Ng Icon Post Processor");function Z0(){return w(E0,{optional:!0})??(o=>o)}function D0(){return w(P0,{optional:!0})??(()=>{})}var _0=new V("Ng Icon Logger"),l0=class{log(a){console.log(a)}warn(a){console.warn(a)}error(a){console.error(a)}};function T0(){return w(_0,{optional:!0})??new l0}var R0=new V("Ng Icon Config");function I0(){return w(R0,{optional:!0})??{}}var N0=new V("Ng Icon Loader Token");var U0=new V("Ng Icon Cache Token");function G0(){return w(N0,{optional:!0})}function Q0(){return w(U0,{optional:!0})}function f0(o){return[{provide:o0,useFactory:(a=w(o0,{optional:!0,skipSelf:!0}))=>E(E({},a?.reduce((l,t)=>E(E({},l),t),{})),o),multi:!0}]}var o0=new V("Icons Token");function O0(){return w(o0,{optional:!0})??[]}function j0(o){return typeof o=="string"?Promise.resolve(o):v0(o)?o.toPromise():o}function W0(o){return o.replace(/([^a-zA-Z0-9])+(.)?/g,(a,l,t)=>t?t.toUpperCase():"").replace(/[^a-zA-Z\d]/g,"").replace(/^([A-Z])/,a=>a.toLowerCase())}var X0=0,B0=(()=>{let a=class a{constructor(){this.config=I0(),this.icons=O0(),this.loader=G0(),this.cache=Q0(),this.preProcessor=Z0(),this.postProcessor=D0(),this.injector=w(p0),this.renderer=w(c0),this.platform=w(g0),this.elementRef=w(e0),this.uniqueId=X0++,this.logger=T0(),this.name=x(),this.svg=x(),this.size=x(this.config.size,{transform:y0}),this.strokeWidth=x(this.config.strokeWidth),this.color=x(this.config.color),z0(()=>this.updateIcon()),w(new x0("aria-hidden"),{optional:!0})||this.elementRef.nativeElement.setAttribute("aria-hidden","true")}ngOnDestroy(){this.svgElement=void 0}async updateIcon(){let t=this.name(),s=this.svg();if(s!==void 0){this.setSvg(s);return}if(t===void 0)return;let p=W0(t);for(let d of[...this.icons].reverse())if(d[p]){this.setSvg(d[p]);return}if(this.loader){let d=await this.requestIconFromLoader(t);if(d!==null){this.setSvg(d);return}}this.logger.warn(`No icon named ${t} was found. You may need to import it using the withIcons function.`)}setSvg(t){if(V0(this.platform)){this.elementRef.nativeElement.innerHTML=t,this.elementRef.nativeElement.setAttribute("data-ng-icon-ssr","");return}if(this.elementRef.nativeElement.hasAttribute("data-ng-icon-ssr")&&(this.elementRef.nativeElement.removeAttribute("data-ng-icon-ssr"),this.svgElement=this.elementRef.nativeElement.querySelector("svg")??void 0,this.elementRef.nativeElement.innerHTML===t)||(this.svgElement&&this.renderer.removeChild(this.elementRef.nativeElement,this.svgElement),t===""))return;let s=this.renderer.createElement("template");t=this.replaceIds(t),this.renderer.setProperty(s,"innerHTML",this.preProcessor(t)),this.svgElement=s.content.firstElementChild,this.postProcessor(this.svgElement),this.renderer.appendChild(this.elementRef.nativeElement,this.svgElement)}replaceIds(t){if(!t.includes("ID_PLACEHOLDER_"))return t;let s=/ID_PLACEHOLDER_(\d+)/g,p=new Map,d=new Set(t.match(s));if(d===null)return t;for(let C of d){let Y=C.replace("ID_PLACEHOLDER_",""),h0=`ng-icon-${this.uniqueId}-${p.size}`;p.set(Y,h0),t=t.replace(new RegExp(C,"g"),h0)}return t}requestIconFromLoader(t){return new Promise(s=>{r0(this.injector,async()=>{if(this.cache){let C=this.cache.get(t);if(typeof C=="string"){s(C);return}if(C instanceof Promise){let Y=await C;s(Y);return}}let p=j0(this.loader(t));this.cache?.set(t,p);let d=await p;this.cache?.set(t,d),s(d)})})}};a.\u0275fac=function(s){return new(s||a)},a.\u0275cmp=M({type:a,selectors:[["ng-icon"]],hostAttrs:["role","img"],hostVars:6,hostBindings:function(s,p){s&2&&m0("--ng-icon__stroke-width",p.strokeWidth())("--ng-icon__size",p.size())("--ng-icon__color",p.color())},inputs:{name:[1,"name"],svg:[1,"svg"],size:[1,"size"],strokeWidth:[1,"strokeWidth"],color:[1,"color"]},decls:0,vars:0,template:function(s,p){},styles:["[_nghost-%COMP%]{display:inline-block;width:var(--ng-icon__size, 1em);height:var(--ng-icon__size, 1em);line-height:initial;vertical-align:initial;overflow:hidden}[_nghost-%COMP%]     svg{width:inherit;height:inherit;vertical-align:inherit}@layer ng-icon{[_nghost-%COMP%]{color:var(--ng-icon__color, currentColor)}}"],changeDetection:0});let o=a;return o})();var b0='<svg xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 16 16"><path d="M9.5 13a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0m0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0m0-5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0"></path></svg>';var J0=["updateBudgetModal"],$0=["openUpdateBudgetModalBtn"];function K0(o,a){if(o&1&&(v(0,"option",14),r(1),h()),o&2){let l=a.$implicit;z("value",l.category_id),i(),P(" ",l.name," ")}}var $=class o{updateBudgetModal;openUpdateBudgetModalBtn;budgetForm;router=w(u0);formBuilder=w(X);mockupService=w(S);categoriesService=w(y);budgetId=x(0);updatedBudgetResponse=Z();deletedBudgetResponse=Z();categories=u([]);constructor(){this.budgetForm=this.formBuilder.group({category_id:[],category_name:[{value:"",disabled:!0},{validators:[g.required]}],limit_amount:[0,{validators:[g.required]}],current_amount:[0],start_date:["",{validators:[g.required]}],end_date:["",{validators:[g.required]}]})}ngOnInit(){this.getCategories()}openModal(){new k(this.updateBudgetModal.nativeElement).show()}closeModal(){k.getInstance(this.updateBudgetModal.nativeElement)?.hide(),this.budgetForm.reset(),this.openUpdateBudgetModalBtn.nativeElement.focus()}openUpdateBudgetModal(){this.budgetId()&&(this.openModal(),this.mockupService.getMockBudgetsById(this.budgetId()).subscribe(a=>{this.budgetForm.setValue({category_id:a.category_id,category_name:a.category_id,limit_amount:a.limit_amount,current_amount:a.current_amount,start_date:a.start_date,end_date:a.end_date})}))}updateBudget(){this.mockupService.updateMockBudget(this.budgetId(),this.budgetForm.value).subscribe(a=>{this.updatedBudgetResponse.emit(a),this.budgetForm.reset(),this.closeModal()})}deleteBudget(){this.mockupService.deleteMockBudget(this.budgetId()).subscribe(a=>{this.deletedBudgetResponse.emit(a),this.budgetForm.reset(),this.closeModal()})}getCategories(){this.categories.set(this.categoriesService.getExpenseCategories())}onView(){this.budgetId()&&this.router.navigate(["/budgets/view-budget",this.budgetId()])}onEdit(){this.budgetId()&&(this.openUpdateBudgetModal(),this.budgetForm.enable(),this.budgetForm.get("category_name")?.disable())}onDelete(){this.budgetId()&&this.deleteBudget()}static \u0275fac=function(l){return new(l||o)};static \u0275cmp=M({type:o,selectors:[["app-update-budget-button"]],viewQuery:function(l,t){if(l&1&&(b(J0,5),b($0,5)),l&2){let s;L(s=q())&&(t.updateBudgetModal=s.first),L(s=q())&&(t.openUpdateBudgetModalBtn=s.first)}},inputs:{budgetId:[1,"budgetId"]},outputs:{updatedBudgetResponse:"updatedBudgetResponse",deletedBudgetResponse:"deletedBudgetResponse"},features:[M0([],[f0({bootstrapThreeDotsVertical:b0})])],decls:53,vars:1,consts:[["updateBudgetModal",""],["openUpdateBudgetModalBtn",""],["data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1",1,"modal","fade","update-budget-modal"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title","fs-5"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[3,"formGroup"],["type","hidden","formControlName","category_id"],["for","category_name"],["formControlName","category_name","id","category_name",1,"form-select","mb-3"],["selected","","disabled",""],[3,"value"],["for","limit_amount"],[1,"input-group","mb-3"],[1,"input-group-text","fw-bold"],["formControlName","limit_amount","id","limit_amount","type","number","min","0",1,"form-control"],["for","start_date"],["formControlName","start_date","id","start_date","type","date",1,"form-control","mb-3"],["for","end_date"],["formControlName","end_date","id","end_date","type","date",1,"form-control","mb-3"],[1,"kpi-panel-container"],[1,"modal-footer"],["type","button",1,"btn","btn-danger",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],[1,"dropdown"],["type","button","data-bs-toggle","dropdown",1,"btn","btn-light","btn-icon"],["name","bootstrapThreeDotsVertical"],[1,"dropdown-menu","dropdown-menu-end"],["type","button",1,"dropdown-item",3,"click"],[1,"dropdown-divider"],["type","button",1,"dropdown-item","text-danger",3,"click"]],template:function(l,t){if(l&1){let s=B();v(0,"div",2,0)(2,"div",3)(3,"div",4)(4,"div",5)(5,"h1",6),r(6," Update Budget "),h(),v(7,"button",7),m("click",function(){return c(s),n(t.closeModal())}),h()(),v(8,"div",8)(9,"form",9),e(10,"input",10),v(11,"label",11),r(12,"Category"),h(),v(13,"select",12)(14,"option",13),r(15,"-- Select Category --"),h(),A(16,K0,2,2,"option",14,H),h(),v(18,"label",15),r(19,"Set Budget"),h(),v(20,"div",16)(21,"span",17),r(22,"\u20B1"),h(),e(23,"input",18),h(),v(24,"label",19),r(25,"Start Date"),h(),e(26,"input",20),v(27,"label",21),r(28,"End Date"),h(),e(29,"input",22),h(),v(30,"div",23),e(31,"app-kpi-panel"),h()(),v(32,"div",24)(33,"button",25),m("click",function(){return c(s),n(t.deleteBudget())}),r(34," Delete "),h(),v(35,"button",26),m("click",function(){return c(s),n(t.updateBudget())}),r(36,"Update"),h()()()()(),v(37,"div",27)(38,"button",28,1),e(40,"ng-icon",29),h(),v(41,"ul",30)(42,"li")(43,"button",31),m("click",function(){return c(s),n(t.onView())}),r(44," View "),h()(),v(45,"li")(46,"button",31),m("click",function(){return c(s),n(t.onEdit())}),r(47," Edit "),h()(),v(48,"li"),e(49,"hr",32),h(),v(50,"li")(51,"button",33),m("click",function(){return c(s),n(t.onDelete())}),r(52," Delete "),h()()()()}l&2&&(i(9),z("formGroup",t.budgetForm),i(7),f(t.categories()))},dependencies:[F,I,O,j,_,N,Q,T,R,W,U,G,B0,A0],styles:[".btn-icon[_ngcontent-%COMP%]{padding:6px 8px;border:1px solid #e5e7eb;border-radius:6px}.dropdown-menu[_ngcontent-%COMP%]{min-width:160px}.update-budget-modal[_ngcontent-%COMP%]{--bs-modal-width: min(95vw, 900px)}.modal-body[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center}"]})};function Y0(o,a){o&1&&(v(0,"span"),r(1,"No budgets available."),h())}function a1(o,a){if(o&1){let l=B();v(0,"div",7)(1,"div",8)(2,"div",9)(3,"h4",10),r(4),h(),v(5,"span",11),r(6),h()(),v(7,"div",12)(8,"app-update-budget-button",13),m("updatedBudgetResponse",function(s){c(l);let p=a0();return n(p.onBudgetUpdated(s))})("deletedBudgetResponse",function(s){c(l);let p=a0();return n(p.onBudgetDeleted(s))}),h()()()()}if(o&2){let l=a.$implicit;i(4),P(" ",l.category_name," "),i(2),P(" \u20B1 ",l.limit_amount," "),i(2),z("budgetId",l.id)}}var K=class o{budgets=u([]);selectedBudget;mockupService=w(S);ngOnInit(){this.getBudgets()}getBudgets(){this.mockupService.getMockBudgets().subscribe(a=>{this.budgets.set(a)})}onBudgetAdded(a){this.budgets.set([...this.budgets(),a])}onBudgetUpdated(a){this.budgets.update(l=>l.map(t=>t.id===a.id?a:t))}onBudgetDeleted(a){this.budgets.set(a)}static \u0275fac=function(l){return new(l||o)};static \u0275cmp=M({type:o,selectors:[["app-budget-list"]],decls:14,vars:2,consts:[[1,"budget-container"],[1,"budget-info-container"],[1,"budget-list-title"],[1,"bi","bi-bookmark-dash-fill","text-success"],[1,"d-flex","justify-content-end"],[3,"addedBudget","mockBudgetId"],[1,"budget-list-container"],[1,"card","mb-4"],[1,"card-body","d-flex","justify-content-between","align-items-center","p-4"],[1,"category-info-container"],[1,"mb-0"],[1,"text-secondary","mb-0"],[1,"update-btn-container"],[3,"updatedBudgetResponse","deletedBudgetResponse","budgetId"]],template:function(l,t){l&1&&(v(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4"),e(4,"i",3),r(5," Budget List"),h(),v(6,"span"),r(7,"Smart Spending Starts Here!"),h()(),v(8,"div",4)(9,"app-add-budget-button",5),m("addedBudget",function(p){return t.onBudgetAdded(p)}),h()()(),v(10,"div",6),n0(11,Y0,2,0,"span"),A(12,a1,9,3,"div",7,H),h()()),l&2&&(i(9),z("mockBudgetId",t.budgets().length+1),i(2),i0(t.budgets().length?-1:11),i(),f(t.budgets()))},dependencies:[F,J,$],styles:[".budget-container[_ngcontent-%COMP%]{margin:30px 50px}.budget-list-container[_ngcontent-%COMP%]{margin-top:30px}.budget-info-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-top:50px}@media (max-width: 768px){.budget-container[_ngcontent-%COMP%]{margin:10px 20px}.budget-info-container[_ngcontent-%COMP%]{flex-direction:column;justify-content:center;align-items:center;gap:20px}.budget-info-container[_ngcontent-%COMP%]   .budget-list-title[_ngcontent-%COMP%]{text-align:center}}"]})};var L0=class o{static \u0275fac=function(l){return new(l||o)};static \u0275cmp=M({type:o,selectors:[["app-budgets"]],decls:4,vars:0,consts:[[1,"budgets-container"]],template:function(l,t){l&1&&(e(0,"app-sidebar")(1,"app-header"),v(2,"main",0),e(3,"app-budget-list"),h())},dependencies:[C0,H0,K],styles:[".budgets-container[_ngcontent-%COMP%]{margin-left:100px;padding:10px;height:100%;background-color:#e8e9eb}@media (max-width: 768px){.budgets-container[_ngcontent-%COMP%]{margin-left:0}}@media (min-width: 769px) and (max-width: 1024px){.budgets-container[_ngcontent-%COMP%]{margin-left:80px}}"]})};export{L0 as Budgets};
