import{A as k,Aa as I,B as P,Ba as q,C as y,Da as m,Fa as g,G as A,I as x,L as D,M as N,Pa as T,R as l,Ra as w,S as R,T as U,W as M,X as C,a as _,da as O,eb as H,h as c,ka as G,la as p,ma as h,na as K,oa as F,pa as j,qa as Q,wa as V,wb as Z,xa as $,y as v,ya as L}from"./chunk-4MU7JTCM.js";var E=class u{MOCK_BUDGETS=[{id:1,category_id:1,category_name:"Clothes",limit_amount:500,current_amount:200,start_date:"2025-11-04",end_date:"2025-11-11"},{id:2,category_id:2,category_name:"Transport",limit_amount:2500,current_amount:1500,start_date:"2025-11-04",end_date:"2025-11-11"}];MOCK_BUDGET_TRANSACTIONS=[{transaction_id:1,budget_id:1,user_id:1,category_id:1,transaction_date:"2025-11-05",created_at:"2025-11-05",updated_at:"2025-11-05",description:"Vintage Shirt purchase",amount:200},{transaction_id:2,budget_id:2,user_id:1,category_id:2,transaction_date:"2025-11-06",created_at:"2025-11-06",updated_at:"2025-11-06",description:"Bus fare",amount:30},{transaction_id:3,budget_id:2,user_id:1,category_id:2,transaction_date:"2025-11-07",created_at:"2025-11-07",updated_at:"2025-11-07",description:"Jeepney fare",amount:100},{transaction_id:4,budget_id:1,user_id:1,category_id:1,transaction_date:"2025-11-08",created_at:"2025-11-08",updated_at:"2025-11-08",description:"Transport to Ukay-Ukay Shop",amount:50},{transaction_id:5,budget_id:2,user_id:1,category_id:2,transaction_date:"2025-11-09",created_at:"2025-11-09",updated_at:"2025-11-09",description:"Bought Labubu while traveling",amount:200}];getMockBudgets(){return c([...this.MOCK_BUDGETS])}getMockBudgetsById(r){let a=this.MOCK_BUDGETS.find(e=>e.id===r);if(!a)throw new Error(`Budget with id ${r} not found.`);return c(a)}addMockBudget(r){return this.MOCK_BUDGETS=[...this.MOCK_BUDGETS,r],c(r)}updateMockBudget(r,a){this.MOCK_BUDGETS=this.MOCK_BUDGETS.map(n=>n.id===r?_(_({},n),a):n);let e=this.MOCK_BUDGETS.find(n=>n.id===r);if(!e)throw new Error("Failed to update because budget not found.");return c(e)}deleteMockBudget(r){return this.MOCK_BUDGETS=this.MOCK_BUDGETS.filter(a=>a.id!==r),c(this.MOCK_BUDGETS)}getAllMockBudgetTransactions(){return c([...this.MOCK_BUDGET_TRANSACTIONS])}getMockBudgetTransactionsByBudgetId(r){let a=this.MOCK_BUDGET_TRANSACTIONS.filter(e=>e.budget_id===r);return c(a)}getMockBudgetTransactionById(r){let a=this.MOCK_BUDGET_TRANSACTIONS.find(e=>e.transaction_id===r);if(!a)throw new Error(`Transaction with id ${r} not found.`);return c(a)}addMockBudgetTransaction(r){return this.MOCK_BUDGET_TRANSACTIONS=[...this.MOCK_BUDGET_TRANSACTIONS,r],c(r)}updateMockBudgetTransaction(r,a){this.MOCK_BUDGET_TRANSACTIONS=this.MOCK_BUDGET_TRANSACTIONS.map(n=>n.transaction_id===r?_(_({},n),a):n);let e=this.MOCK_BUDGET_TRANSACTIONS.find(n=>n.transaction_id===r);if(!e)throw new Error("Failed to update because transaction not found.");return c(e)}deleteMockBudgetTransaction(r){return this.MOCK_BUDGET_TRANSACTIONS=this.MOCK_BUDGET_TRANSACTIONS.filter(a=>a.transaction_id!==r),c(this.MOCK_BUDGET_TRANSACTIONS)}static \u0275fac=function(a){return new(a||u)};static \u0275prov=v({token:u,factory:u.\u0275fac,providedIn:"root"})};var X=["path"],Y=Math.PI/180,ee=(()=>{let r=class r{constructor(e){this.supportsSvg=!!(e&&e.createElementNS&&e.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect),this.base=e?.head?.querySelector("base"),this.hasPerf=typeof window<"u"&&window.performance&&window.performance.now&&typeof window.performance.now()=="number"}resolveColor(e){if(this.base&&this.base.href){let n=e.indexOf("#");if(n>-1&&e.indexOf("url")>-1)return e.slice(0,n)+location.href+e.slice(n)}return e}getTimestamp(){return this.hasPerf?window.performance.now():Date.now()}getArc(e,n,t,i,s=!1){let d=Math.max(0,Math.min(e||0,n)),o=s?180:359.9999,f=n===0?o:d/n*o,B=this._polarToCartesian(i,t,f),S=this._polarToCartesian(i,t,0),b=f<=180?0:1;return`M ${B} A ${t} ${t} 0 ${b} 0 ${S}`}_polarToCartesian(e,n,t){let i=(t-90)*Y,s=e+n*Math.cos(i),d=e+n*Math.sin(i);return s+" "+d}};r.\u0275fac=function(n){return new(n||r)(P(x,8))},r.\u0275prov=v({token:r,factory:r.\u0275fac,providedIn:"root"});let u=r;return u})(),te={radius:125,animation:"easeOutCubic",animationDelay:void 0,duration:500,stroke:15,color:"#45CCCE",background:"#EAEAEA",responsive:!1,clockwise:!0,semicircle:!1,rounded:!1,innerCircleFill:"transparent"},ne=new k("ROUND_PROGRESS_DEFAULTS",{providedIn:"root",factory:()=>te});var ie=(()=>{let r=class r{linearEase(e,n,t,i){return t*e/i+n}easeInQuad(e,n,t,i){return t*(e/=i)*e+n}easeOutQuad(e,n,t,i){return-t*(e/=i)*(e-2)+n}easeInOutQuad(e,n,t,i){return(e/=i/2)<1?t/2*e*e+n:-t/2*(--e*(e-2)-1)+n}easeInCubic(e,n,t,i){return t*(e/=i)*e*e+n}easeOutCubic(e,n,t,i){return t*((e=e/i-1)*e*e+1)+n}easeInOutCubic(e,n,t,i){return(e/=i/2)<1?t/2*e*e*e+n:t/2*((e-=2)*e*e+2)+n}easeInQuart(e,n,t,i){return t*(e/=i)*e*e*e+n}easeOutQuart(e,n,t,i){return-t*((e=e/i-1)*e*e*e-1)+n}easeInOutQuart(e,n,t,i){return(e/=i/2)<1?t/2*e*e*e*e+n:-t/2*((e-=2)*e*e*e-2)+n}easeInQuint(e,n,t,i){return t*(e/=i)*e*e*e*e+n}easeOutQuint(e,n,t,i){return t*((e=e/i-1)*e*e*e*e+1)+n}easeInOutQuint(e,n,t,i){return(e/=i/2)<1?t/2*e*e*e*e*e+n:t/2*((e-=2)*e*e*e*e+2)+n}easeInSine(e,n,t,i){return-t*Math.cos(e/i*(Math.PI/2))+t+n}easeOutSine(e,n,t,i){return t*Math.sin(e/i*(Math.PI/2))+n}easeInOutSine(e,n,t,i){return-t/2*(Math.cos(Math.PI*e/i)-1)+n}easeInExpo(e,n,t,i){return e===0?n:t*Math.pow(2,10*(e/i-1))+n}easeOutExpo(e,n,t,i){return e===i?n+t:t*(-Math.pow(2,-10*e/i)+1)+n}easeInOutExpo(e,n,t,i){return e===0?n:e===i?n+t:(e/=i/2)<1?t/2*Math.pow(2,10*(e-1))+n:t/2*(-Math.pow(2,-10*--e)+2)+n}easeInCirc(e,n,t,i){return-t*(Math.sqrt(1-(e/=i)*e)-1)+n}easeOutCirc(e,n,t,i){return t*Math.sqrt(1-(e=e/i-1)*e)+n}easeInOutCirc(e,n,t,i){return(e/=i/2)<1?-t/2*(Math.sqrt(1-e*e)-1)+n:t/2*(Math.sqrt(1-(e-=2)*e)+1)+n}easeInElastic(e,n,t,i){let s=i*.3,d=1.70158,o=t;return e===0?n:(e/=i)===1?n+t:(o<Math.abs(t)?(o=t,d=s/4):d=s/(2*Math.PI)*Math.asin(t/o),-(o*Math.pow(2,10*e--)*Math.sin((e*i-d)*(2*Math.PI)/s))+n)}easeOutElastic(e,n,t,i){let s=i*.3,d=1.70158,o=t;return e===0?n:(e/=i)===1?n+t:(o<Math.abs(t)?(o=t,d=s/4):d=s/(2*Math.PI)*Math.asin(t/o),o*Math.pow(2,-10*e)*Math.sin((e*i-d)*(2*Math.PI)/s)+t+n)}easeInOutElastic(e,n,t,i){let s=i*.44999999999999996,d=1.70158,o=t;return e===0?n:(e/=i/2)===2?n+t:(o<Math.abs(t)?(o=t,d=s/4):d=s/(2*Math.PI)*Math.asin(t/o),e<1?-.5*(o*Math.pow(2,10*(e-=1))*Math.sin((e*i-d)*(2*Math.PI)/s))+n:o*Math.pow(2,-10*(e-=1))*Math.sin((e*i-d)*(2*Math.PI)/s)*.5+t+n)}easeInBack(e,n,t,i,s=1.70158){return t*(e/=i)*e*((s+1)*e-s)+n}easeOutBack(e,n,t,i,s=1.70158){return t*((e=e/i-1)*e*((s+1)*e+s)+1)+n}easeInOutBack(e,n,t,i,s=1.70158){return(e/=i/2)<1?t/2*(e*e*(((s*=1.525)+1)*e-s))+n:t/2*((e-=2)*e*(((s*=1.525)+1)*e+s)+2)+n}easeInBounce(e,n,t,i){return t-this.easeOutBounce(i-e,0,t,i)+n}easeOutBounce(e,n,t,i){return(e/=i)<1/2.75?t*(7.5625*e*e)+n:e<2/2.75?t*(7.5625*(e-=1.5/2.75)*e+.75)+n:e<2.5/2.75?t*(7.5625*(e-=2.25/2.75)*e+.9375)+n:t*(7.5625*(e-=2.625/2.75)*e+.984375)+n}easeInOutBounce(e,n,t,i){return e<i/2?this.easeInBounce(e*2,0,t,i)*.5+n:this.easeOutBounce(e*2-i,0,t,i)*.5+t*.5+n}};r.\u0275fac=function(n){return new(n||r)},r.\u0275prov=v({token:r,factory:r.\u0275fac,providedIn:"root"});let u=r;return u})(),J=(()=>{let r=class r{constructor(e,n,t,i){this.service=e,this.easing=n,this.defaults=t,this.ngZone=i,this.currentLinecap="",this.current=0,this.max=0,this.radius=this.defaults.radius,this.animation=this.defaults.animation,this.animationDelay=this.defaults.animationDelay,this.duration=this.defaults.duration,this.stroke=this.defaults.stroke,this.color=this.defaults.color,this.background=this.defaults.background,this.responsive=this.defaults.responsive,this.clockwise=this.defaults.clockwise,this.semicircle=this.defaults.semicircle,this.rounded=this.defaults.rounded,this.innerCircleFill=this.defaults.innerCircleFill,this.onRender=new R,this.lastAnimationId=0}_animateChange(e,n){typeof e!="number"&&(e=0),n=this._clamp(n),e=this._clamp(e);let t=n-e,i=this.duration;this.ngZone.runOutsideAngular(()=>{let s=()=>{let d=this.service.getTimestamp(),o=++this.lastAnimationId,f=()=>{let B=Math.min(this.service.getTimestamp()-d,i),S=this.easing[this.animation],b=S(B,e,t,i);this._updatePath(b),this.onRender.observers.length>0&&this.onRender.emit(b),o===this.lastAnimationId&&B<i&&requestAnimationFrame(f)};requestAnimationFrame(f)};this.animationDelay>0?setTimeout(s,this.animationDelay):s()})}_updatePath(e){if(this.path){let n=this.service.getArc(e,this.max,this.radius-this.stroke/2,this.radius,this.semicircle),t=this.path.nativeElement,i=this.rounded&&e>0?"round":"";i!==this.currentLinecap&&(this.currentLinecap=i,t.style.strokeLinecap=i),t.setAttribute("d",n)}}_clamp(e){return Math.max(0,Math.min(e||0,this.max))}getPathTransform(){let e=this._getDiameter();return this.semicircle?this.clockwise?`translate(0, ${e}) rotate(-90)`:`translate(${e+","+e}) rotate(90) scale(-1, 1)`:this.clockwise?null:`scale(-1, 1) translate(-${e} 0)`}resolveColor(e){return this.service.resolveColor(e)}ngOnChanges(e){e.current?this._animateChange(e.current.previousValue,e.current.currentValue):this._updatePath(this.current)}_getDiameter(){return this.radius*2}_getElementHeight(){return this.responsive?null:(this.semicircle?this.radius:this._getDiameter())+"px"}_getViewBox(){let e=this._getDiameter();return`0 0 ${e} ${this.semicircle?this.radius:e}`}_getPaddingBottom(){return this.responsive?this.semicircle?"50%":"100%":null}};r.\u0275fac=function(n){return new(n||r)(M(ee),M(ie),M(ne),M(U))},r.\u0275cmp=C({type:r,selectors:[["round-progress"]],viewQuery:function(n,t){if(n&1&&V(X,5),n&2){let i;$(i=L())&&(t.path=i.first)}},hostAttrs:["role","progressbar"],hostVars:11,hostBindings:function(n,t){n&2&&(O("aria-valuemin",0)("aria-valuemax",t.max)("aria-valuenow",t.current),I("width",t.responsive?"":t._getDiameter()+"px")("height",t._getElementHeight())("padding-bottom",t._getPaddingBottom()),q("responsive",t.responsive))},inputs:{current:"current",max:"max",radius:"radius",animation:"animation",animationDelay:"animationDelay",duration:"duration",stroke:"stroke",color:"color",background:"background",responsive:"responsive",clockwise:"clockwise",semicircle:"semicircle",rounded:"rounded",innerCircleFill:"innerCircleFill"},outputs:{onRender:"onRender"},features:[N],decls:4,vars:14,consts:[["path",""],["xmlns","http://www.w3.org/2000/svg"],["fill","none"]],template:function(n,t){n&1&&(A(),F(0,"svg",1),Q(1,"circle")(2,"path",2,0),j()),n&2&&(O("viewBox",t._getViewBox()),l(),I("stroke",t.resolveColor(t.background))("stroke-width",t.stroke),O("fill",t.innerCircleFill)("cx",t.radius)("cy",t.radius)("r",t.radius-t.stroke/2),l(),I("stroke-width",t.stroke)("stroke",t.resolveColor(t.color)),O("transform",t.getPathTransform()))},styles:["[_nghost-%COMP%]{display:block;position:relative;overflow:hidden}.responsive[_nghost-%COMP%]{width:100%;padding-bottom:100%}.responsive[_nghost-%COMP%] > svg[_ngcontent-%COMP%]{position:absolute;width:100%;height:100%;top:0;left:0}"],changeDetection:0});let u=r;return u})();var W=class u{remainingBudget=0;totalBudget=0;totalExpenses=0;budgetPercent=0;activatedRoute=y(Z);mockupService=y(E);currentBudget=D({});budgetId=D(Number(this.activatedRoute.snapshot.paramMap.get("id")??1));ngOnInit(){this.activatedRoute.paramMap.subscribe(r=>{let a=Number(r.get("id")??1);this.budgetId.set(a),this.getBudgetData()})}getBudgetData(){let r=this.budgetId();this.mockupService.getMockBudgetsById(r).subscribe({next:a=>{this.currentBudget.set(a),this.totalBudget=a.limit_amount,this.totalExpenses=a.limit_amount*.6,this.remainingBudget=this.totalBudget-this.totalExpenses,this.budgetPercent=this.totalExpenses/this.totalBudget*100},error:a=>console.error("Failed to load budget for KPI panel",a)})}static \u0275fac=function(a){return new(a||u)};static \u0275cmp=C({type:u,selectors:[["app-kpi-panel"]],decls:30,vars:22,consts:[[1,"kpi-panel-container"],[1,"card"],[1,"card-header","p-4"],[1,"mb-0"],[1,"card-body"],[1,"budget-info-wrapper"],[1,"text-primary","fw-bold","mb-0"],[1,"text-secondary"],[1,"progress-container"],[3,"current","max","color","background","radius","stroke","animation","animationDelay"],[1,"progress-text"],[1,"card-footer","d-flex","justify-content-center"],[1,"h6"],[1,"text-success","fw-semibold"],[1,"fw-semibold",2,"color","#e74c3c"]],template:function(a,e){a&1&&(p(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4",3),m(4),h()(),p(5,"div",4)(6,"div",5)(7,"div")(8,"h2",6),m(9),T(10,"number"),h(),p(11,"span",7),m(12,"Remaining Budget"),h()(),p(13,"div",8),K(14,"round-progress",9),p(15,"span",10),m(16),h()()()(),p(17,"div",11)(18,"div")(19,"span",12),m(20,"Total Budget: \u20B1 "),h(),p(21,"span",13),m(22),T(23,"number"),h()(),p(24,"div")(25,"span",12),m(26,"Total Expenses: \u20B1 "),h(),p(27,"span",14),m(28),T(29,"number"),h()()()()()),a&2&&(l(4),g("",e.currentBudget().category_name," Budget Overview"),l(5),g(" ",w(10,13,e.remainingBudget,"1.2-2")," "),l(5),G("current",e.budgetPercent)("max",100)("color","#45ccce")("background","#eaeaea")("radius",100)("stroke",20)("animation","easeInOutQuart")("animationDelay",0),l(2),g("",e.budgetPercent,"%"),l(6),g(" ",w(23,16,e.totalBudget,"1.2-2")," "),l(6),g(" ",w(29,19,e.totalExpenses,"1.2-2")," "))},dependencies:[J,H],styles:[".kpi-panel-container[_ngcontent-%COMP%]{margin:10px 50px}.budget-info-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center;padding:20px 100px}.progress-container[_ngcontent-%COMP%]{position:relative;display:inline-block}.progress-text[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-size:24px;font-weight:700}.card-footer[_ngcontent-%COMP%]{gap:50px}@media (min-width: 320px) and (max-width: 424px){.card-footer[_ngcontent-%COMP%]{gap:18px}}@media (max-width: 768px){.kpi-panel-container[_ngcontent-%COMP%]{margin:10px}.budget-info-wrapper[_ngcontent-%COMP%]{flex-direction:column-reverse;padding:20px;gap:20px}.card-footer[_ngcontent-%COMP%]{gap:16px}}"]})};export{E as a,W as b};
