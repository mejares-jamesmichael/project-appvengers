import{a as A,b as u,c as T,d as F,g as z,j as E,k,l as q,m as D,n as R,q as I,s as j}from"./chunk-DUKZIXU3.js";import{a as N}from"./chunk-PHYEHXVE.js";import{C as s,Ca as O,Da as r,Fa as P,Ka as b,L as p,R as d,X as C,ea as c,fa as l,ka as x,kb as v,la as o,ma as n,na as m,nb as w,ua as M,va as g,wb as S,y as _,yb as y}from"./chunk-4MU7JTCM.js";var h=class t{apiUrl=`${N.apiUrl}/auth`;http=s(w);verifyAccountSetupToken(i,e,a){let f=`
        ${this.apiUrl}/verify-account-setup?token=${encodeURIComponent(i)}
        &username=${encodeURIComponent(e)}
      `;return this.http.put(f,a,{headers:new v({"Content-Type":"application/json"})})}static \u0275fac=function(e){return new(e||t)};static \u0275prov=_({token:t,factory:t.\u0275fac,providedIn:"root"})};function B(t,i){if(t&1&&(o(0,"div",27),r(1),n()),t&2){let e=g();O(b("alert alert-",e.alertType())),d(),P(" ",e.alertMessage()," ")}}function V(t,i){t&1&&(o(0,"div",28),r(1,"First name is required."),n())}function $(t,i){if(t&1&&c(0,V,2,0,"div",28),t&2){let e=g();l(!(e.firstName==null||e.firstName.errors==null)&&e.firstName.errors.required?0:-1)}}function H(t,i){t&1&&(o(0,"div",28),r(1,"Last name is required."),n())}function W(t,i){if(t&1&&c(0,H,2,0,"div",28),t&2){let e=g();l(!(e.lastName==null||e.lastName.errors==null)&&e.lastName.errors.required?0:-1)}}function L(t,i){t&1&&(o(0,"div",28),r(1,"Birthdate is required."),n())}function J(t,i){if(t&1&&c(0,L,2,0,"div",28),t&2){let e=g();l(!(e.birthdate==null||e.birthdate.errors==null)&&e.birthdate.errors.required?0:-1)}}function K(t,i){t&1&&(o(0,"div",28),r(1,"Gender is required."),n())}function Q(t,i){if(t&1&&c(0,K,2,0,"div",28),t&2){let e=g();l(!(e.gender==null||e.gender.errors==null)&&e.gender.errors.required?0:-1)}}var G=class t{setupAccountForm;formBuilder=s(I);setupAccountService=s(h);activatedRoute=s(S);router=s(y);userToken=p("");username=p("");isDisabled=p(!0);isAlertShown=p(!1);alertType=p("danger");alertMessage=p("");constructor(){this.setupAccountForm=this.formBuilder.group({firstName:["",{validators:[u.required]}],middleName:[""],lastName:["",{validators:[u.required]}],birthdate:["",{validators:[u.required]}],gender:["",{validators:[u.required]}]})}ngOnInit(){this.getUserTokenWithUsername()}get firstName(){return this.setupAccountForm.get("firstName")}get lastName(){return this.setupAccountForm.get("lastName")}get birthdate(){return this.setupAccountForm.get("birthdate")}get gender(){return this.setupAccountForm.get("gender")}getUserTokenWithUsername(){this.activatedRoute.queryParams.subscribe(i=>{let e=i.token,a=i.username;this.userToken.set(e||""),this.username.set(a||"")})}submitForm(){let i=this.setupAccountForm;i.valid?(this.isAlertShown.set(!1),this.setupAccountService.verifyAccountSetupToken(this.userToken(),this.username(),i.value).subscribe({next:e=>{e.success?(this.alertType.set("success"),this.alertMessage.set("Account setup verified successfully."),setTimeout(()=>{this.router.navigate(["/auth-page"])},2e3)):(this.alertType.set("danger"),this.alertMessage.set(e.message||"Failed to verify account.")),this.isAlertShown.set(!0)},error:()=>{this.alertType.set("danger"),this.alertMessage.set("Server error. Please try again later."),this.isAlertShown.set(!0)}})):(this.alertType.set("danger"),this.alertMessage.set("Please fill all required fields to continue."),this.isAlertShown.set(!0))}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=C({type:t,selectors:[["app-setup-account"]],decls:50,vars:6,consts:[[1,"main-container"],[1,"hero-panel"],[1,"panel-introduction"],[1,"hero-container"],["src","../../assets/images/waving_assistant.png","alt","hero-image"],[1,"setup-acc-container"],["role","alert",3,"class"],[3,"formGroup"],[1,"first-row"],[1,"form-input"],["for","first_name"],["id","first_name","formControlName","firstName","type","text","placeholder","John",1,"form-control"],["for","last_name"],["id","last_name","formControlName","lastName","type","text","placeholder","Doe",1,"form-control"],["for","middle_name"],["id","middle_name","formControlName","middleName","type","text","placeholder","(optional)",1,"form-control"],[1,"third-row"],["for","birthdate"],["id","birthdate","formControlName","birthdate","type","date","placeholder","Birthdate",1,"form-control"],["for","gender"],["id","gender","formControlName","gender",1,"form-select"],["value","","selected","","disabled",""],["value","Female"],["value","Male"],["value","N/A"],[1,"continue-btn-container"],["type","button",1,"btn","btn-primary",3,"click"],["role","alert"],[1,"text-danger"]],template:function(e,a){e&1&&(o(0,"main")(1,"div",0)(2,"div",1)(3,"div",2)(4,"h4"),r(5,"Welcome to iBudget"),n(),o(6,"p"),r(7,"Please set up your account to get started."),n()(),o(8,"div",3),m(9,"img",4),n()(),o(10,"div",5),c(11,B,2,4,"div",6),o(12,"form",7)(13,"div",8)(14,"div",9)(15,"label",10),r(16,"First Name"),n(),m(17,"input",11),c(18,$,1,1),n(),o(19,"div",9)(20,"label",12),r(21,"Last Name"),n(),m(22,"input",13),c(23,W,1,1),n()(),o(24,"div",9)(25,"label",14),r(26,"Middle Name"),n(),m(27,"input",15),n(),o(28,"div",16)(29,"div",9)(30,"label",17),r(31,"Birthdate"),n(),m(32,"input",18),c(33,J,1,1),n(),o(34,"div",9)(35,"label",19),r(36,"Gender"),n(),o(37,"select",20)(38,"option",21),r(39,"Gender"),n(),o(40,"option",22),r(41,"Female"),n(),o(42,"option",23),r(43,"Male"),n(),o(44,"option",24),r(45,"Rather not say"),n()(),c(46,Q,1,1),n()(),o(47,"div",25)(48,"button",26),M("click",function(){return a.submitForm()}),r(49," Continue "),n()()()()()()),e&2&&(d(11),l(a.isAlertShown()?11:-1),d(),x("formGroup",a.setupAccountForm),d(6),l(a.firstName!=null&&a.firstName.touched?18:-1),d(5),l(a.lastName!=null&&a.lastName.touched?23:-1),d(10),l(a.birthdate!=null&&a.birthdate.touched?33:-1),d(13),l(a.gender!=null&&a.gender.touched?46:-1))},dependencies:[j,z,D,R,A,q,T,F,E,k],styles:["main[_ngcontent-%COMP%]{height:100%;margin:0;padding:0}.main-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center;justify-content:center;height:100%;background-color:#f5f5f5}.hero-panel[_ngcontent-%COMP%]{padding:30px;border-radius:10px 0 0 10px;height:90%;display:flex;flex-direction:column;background:#2d5a87;box-shadow:0 4px 8px #0000004d}.hero-panel[_ngcontent-%COMP%]   .panel-introduction[_ngcontent-%COMP%]{margin-top:20px;color:#fff}.hero-panel[_ngcontent-%COMP%]   .panel-introduction[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:28px;text-align:center;font-family:Inter,sans-serif;font-optical-sizing:auto;font-weight:700;font-style:normal}.hero-panel[_ngcontent-%COMP%]   .panel-introduction[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px;margin-top:10px;text-align:center;font-family:Inter,sans-serif;font-weight:300}.hero-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100%}.hero-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;height:60%;bottom:26px;position:absolute}.setup-acc-container[_ngcontent-%COMP%]{padding:30px 80px;background-color:#fff;box-shadow:0 4px 8px #0000004d;border-radius:0 10px 10px 0;height:90%;display:flex;flex-direction:column;justify-content:center}form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:30px;padding:10px}.first-row[_ngcontent-%COMP%], .third-row[_ngcontent-%COMP%]{display:flex;flex-direction:row}.first-row[_ngcontent-%COMP%]{gap:20px}.third-row[_ngcontent-%COMP%]{justify-content:space-between}.third-row[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(1){width:47%}.third-row[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(2){width:48%}.form-control[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%]{padding:10px;font-size:16px;border:1px solid #ccc;border-radius:5px;box-shadow:0 1px 1px #00000014 inset}.form-control[_ngcontent-%COMP%]:focus, .form-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#2d5a87;box-shadow:0 0 5px #2d5a8780}.continue-btn-container[_ngcontent-%COMP%]{display:flex}.continue-btn-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;background-color:#2d5a87;border:1px solid rgb(45,90,135)}.continue-btn-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#204161}@media (min-width: 768px) and (max-width: 1024px){main[_ngcontent-%COMP%]{height:100%}.main-container[_ngcontent-%COMP%]{flex-direction:row;height:100%;max-height:none;padding:20px 0}.hero-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{bottom:52px;height:50%}}@media (min-width: 426px) and (max-width: 768px){main[_ngcontent-%COMP%]{height:100%}.main-container[_ngcontent-%COMP%]{padding:10px 20px}.hero-panel[_ngcontent-%COMP%]{border-radius:10px 0 0 10px;width:100%;height:90%}.hero-panel[_ngcontent-%COMP%]   .panel-introduction[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:20px}.hero-panel[_ngcontent-%COMP%]   .panel-introduction[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}.hero-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;height:55%;bottom:35px}.setup-acc-container[_ngcontent-%COMP%]{border-radius:0 10px 10px 0;width:100%;height:90%}}@media (min-width: 377px) and (max-width: 426px){main[_ngcontent-%COMP%]{height:100%}.main-container[_ngcontent-%COMP%]{flex-direction:column;height:100%}.hero-panel[_ngcontent-%COMP%]{border-radius:0;width:100%;height:100%}.hero-panel[_ngcontent-%COMP%]   .panel-introduction[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:24px}.hero-panel[_ngcontent-%COMP%]   .panel-introduction[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}.hero-container[_ngcontent-%COMP%], .hero-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:none!important}form[_ngcontent-%COMP%]{gap:20px;width:100%;height:100%}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:16px}.setup-acc-container[_ngcontent-%COMP%]{border-radius:0;width:100%;height:100%;padding:10px}.setup-acc-container[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]{font-size:16px;margin-bottom:0}}@media (max-width: 320px){main[_ngcontent-%COMP%]{height:100%}.main-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%}.hero-panel[_ngcontent-%COMP%]{justify-content:center;border-radius:0;padding:0;width:100%;height:100%}.hero-panel[_ngcontent-%COMP%]   .panel-introduction[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:22px}.hero-panel[_ngcontent-%COMP%]   .panel-introduction[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px}.hero-container[_ngcontent-%COMP%], .hero-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:none!important}.setup-acc-container[_ngcontent-%COMP%]{border-radius:0;padding:20px;width:100%;height:100%}.setup-acc-container[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]{font-size:12px;margin-bottom:0}form[_ngcontent-%COMP%]{gap:10px;width:100%;height:100%}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:12px}.form-control[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%]{padding:7px;font-size:14px;border:1px solid #ccc;border-radius:5px;box-shadow:0 1px 1px #00000014 inset}.first-row[_ngcontent-%COMP%], .third-row[_ngcontent-%COMP%]{flex-direction:column;justify-content:center;gap:5px}}@media (min-width: 321px) and (max-width: 376px){main[_ngcontent-%COMP%]{height:100%}.main-container[_ngcontent-%COMP%]{flex-direction:column;height:100%}.hero-panel[_ngcontent-%COMP%]{border-radius:0;width:100%;height:100%}.hero-panel[_ngcontent-%COMP%]   .panel-introduction[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:22px}.hero-panel[_ngcontent-%COMP%]   .panel-introduction[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}.hero-container[_ngcontent-%COMP%], .hero-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{display:none!important}form[_ngcontent-%COMP%]{gap:15px;width:100%;height:100%}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:14px}.setup-acc-container[_ngcontent-%COMP%]{border-radius:0;width:100%;height:100%;padding:5px}.setup-acc-container[_ngcontent-%COMP%]   .alert[_ngcontent-%COMP%]{font-size:14px;margin-bottom:0}}@media (min-width: 426px) and (max-width: 768px){main[_ngcontent-%COMP%]{height:100%}.main-container[_ngcontent-%COMP%]{display:flex}.setup-acc-container[_ngcontent-%COMP%]{padding:30px 20px}.form-control[_ngcontent-%COMP%], .form-select[_ngcontent-%COMP%]{padding:7px;font-size:14px;border:1px solid #ccc;border-radius:5px;box-shadow:0 1px 1px #00000014 inset}form[_ngcontent-%COMP%]{gap:5px}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{font-size:14px}}@media (min-width: 1025px){.setup-acc-container[_ngcontent-%COMP%]{padding:30px 100px}.hero-panel[_ngcontent-%COMP%]{padding:70px}.hero-panel[_ngcontent-%COMP%]   .panel-introduction[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:32px}.hero-panel[_ngcontent-%COMP%]   .panel-introduction[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:18px}.hero-container[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{bottom:30px}}"]})};export{G as SetupAccount};
