import{a as y,b as Y}from"./chunk-VYMAGPRH.js";import{a as M}from"./chunk-LN244XIN.js";import{a as W,c as X}from"./chunk-ZUJZEK4Q.js";import"./chunk-PZSFEQ4E.js";import{a as I,c as T,d as k,g as V,h as N,j as F,k as R,l as A,m as D,n as O,o as U,q as G,s as Q}from"./chunk-DUKZIXU3.js";import"./chunk-PHYEHXVE.js";import{C as c,Da as i,E as l,Ea as w,F as p,Fa as J,L as x,R as m,X as b,Xa as C,Ya as L,ea as q,fa as H,ga as $,ia as K,ja as z,ka as E,la as n,ma as t,na as g,ta as _,ua as s,va as S,wa as B,wb as v,xa as f,ya as h}from"./chunk-4MU7JTCM.js";var ie=["addBudgetExpenseModal"],de=["openAddBudgetExpenseModalBtn"],P=class r{addBudgetExpenseModal;openAddBudgetExpenseModalBtn;addBudgetExpenseForm;formBuilder=c(G);mockupService=c(y);activatedRoute=c(v);addBudgetExpenseResponse=C();currentTransactionId=x("");currentBudgetId=x("");date=x(new Date().toISOString().split("T")[0]);constructor(){this.addBudgetExpenseForm=this.formBuilder.group({transaction_id:[""],budget_id:[""],category_id:[""],transaction_date:[""],description:[""],amount:[""],created_at:[""],updated_at:[""],deleted_at:[""]})}ngOnInit(){this.getCurrentTransactionId(),this.getCurrentBudgetId(),this.addBudgetExpenseForm.patchValue({transaction_date:this.date(),created_at:this.date(),updated_at:this.date()})}openModal(){new M(this.addBudgetExpenseModal.nativeElement).show()}closeModal(){M.getInstance(this.addBudgetExpenseModal.nativeElement)?.hide(),this.openAddBudgetExpenseModalBtn.nativeElement.focus(),this.getCurrentTransactionId(),this.getCurrentBudgetId()}getCurrentTransactionId(){this.mockupService.getAllMockBudgetTransactions().subscribe(d=>{let e=Math.max(...d.map(o=>o.transaction_id),0);this.currentTransactionId.set((e+1).toString()),this.addBudgetExpenseForm.patchValue({transaction_id:+this.currentTransactionId()})})}getCurrentBudgetId(){this.activatedRoute.paramMap.subscribe(d=>{let e=d.get("id")||"";this.currentBudgetId.set(e),this.addBudgetExpenseForm.patchValue({budget_id:+this.currentBudgetId()})})}addExpense(){if(this.addBudgetExpenseForm.valid){let d=this.addBudgetExpenseForm.value;this.getCurrentTransactionId(),this.getCurrentBudgetId(),this.mockupService.addMockBudgetTransaction(d).subscribe(e=>{console.log("New Budget Expense Added:",e),this.addBudgetExpenseResponse.emit(e),this.addBudgetExpenseForm.reset(),this.closeModal()})}}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=b({type:r,selectors:[["app-add-budget-expense"]],viewQuery:function(e,o){if(e&1&&(B(ie,5),B(de,5)),e&2){let a;f(a=h())&&(o.addBudgetExpenseModal=a.first),f(a=h())&&(o.openAddBudgetExpenseModalBtn=a.first)}},outputs:{addBudgetExpenseResponse:"addBudgetExpenseResponse"},decls:41,vars:1,consts:[["addBudgetExpenseModal",""],["openAddBudgetExpenseModalBtn",""],["data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1",1,"modal","fade","add-budget-expense-modal"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title","fs-5"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[3,"formGroup"],["for","transaction_date"],["formControlName","transaction_date","id","transaction_date","type","date",1,"form-control"],["for","category_id"],["id","category_id","formControlName","category_id",1,"form-select"],["selected","","disabled",""],["value","1"],["value","2"],["value","3"],["for","description"],["formControlName","description","id","description","rows","3",1,"form-control","mb-3"],["for","amount"],[1,"input-group","mb-3"],[1,"input-group-text","fw-bold"],["formControlName","amount","id","amount","type","number","min","0",1,"form-control"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-sm","btn-danger","mb-3",3,"click"]],template:function(e,o){if(e&1){let a=_();n(0,"div",2,0)(2,"div",3)(3,"div",4)(4,"div",5)(5,"h1",6),i(6," Add Budget Expense "),t(),n(7,"button",7),s("click",function(){return l(a),p(o.closeModal())}),t()(),n(8,"div",8)(9,"form",9)(10,"label",10),i(11,"Transaction Date"),t(),g(12,"input",11),n(13,"label",12),i(14,"Category"),t(),n(15,"select",13)(16,"option",14),i(17,"-- Select Category --"),t(),n(18,"option",15),i(19,"Education"),t(),n(20,"option",16),i(21,"Food"),t(),n(22,"option",17),i(23,"Transportation"),t()(),n(24,"label",18),i(25,"Description"),t(),g(26,"textarea",19),n(27,"label",20),i(28,"Amount"),t(),n(29,"div",21)(30,"span",22),i(31,"\u20B1"),t(),g(32,"input",23),t()()(),n(33,"div",24)(34,"button",25),s("click",function(){return l(a),p(o.closeModal())}),i(35," Close "),t(),n(36,"button",26),s("click",function(){return l(a),p(o.addExpense())}),i(37,"Add Expense"),t()()()()(),n(38,"button",27,1),s("click",function(){return l(a),p(o.openModal())}),i(40,` Add Expense
`),t()}e&2&&(m(9),E("formGroup",o.addBudgetExpenseForm))},dependencies:[Q,V,D,O,I,N,A,T,k,U,F,R],encapsulation:2})};var oe=["updateBudgetExpenseModal"],ae=["openUpdateBudgetExpenseModalBtn"],j=class r{updateBudgetExpenseModal;openUpdateBudgetExpenseModalBtn;date=x(new Date().toISOString().split("T")[0]);updateBudgetExpenseForm;formBuilder=c(G);mockupService=c(y);activatedRoute=c(v);transactionId=L(0);currentBudgetId=x(0);updateBudgetExpenseResponse=C();constructor(){this.updateBudgetExpenseForm=this.formBuilder.group({transaction_id:[""],budget_id:[""],category_id:[""],transaction_date:[""],description:[""],amount:[""],created_at:[""],updated_at:[""],deleted_at:[""]})}ngOnInit(){this.getCurrentBudgetId(),this.updateBudgetExpenseForm.patchValue({updated_at:this.date()});let d=this.transactionId();d&&d>0&&this.getTransactionData()}openModal(){new M(this.updateBudgetExpenseModal.nativeElement).show()}closeModal(){M.getInstance(this.updateBudgetExpenseModal.nativeElement)?.hide(),this.openUpdateBudgetExpenseModalBtn.nativeElement.focus(),this.getTransactionData()}getTransactionData(){let d=this.transactionId();!d||d<=0||this.mockupService.getMockBudgetTransactionById(d).subscribe(e=>{this.updateBudgetExpenseForm.patchValue({transaction_id:e.transaction_id,budget_id:e.budget_id,category_id:e.category_id,transaction_date:e.transaction_date,description:e.description,amount:e.amount,created_at:e.created_at,updated_at:e.updated_at,deleted_at:e.deleted_at})})}updateExpense(){if(this.updateBudgetExpenseForm.valid){let d=this.updateBudgetExpenseForm.value;this.mockupService.updateMockBudgetTransaction(d.transaction_id,d).subscribe(e=>{this.updateBudgetExpenseResponse.emit(e),this.closeModal()})}}getCurrentBudgetId(){this.activatedRoute.paramMap.subscribe(d=>{let e=d.get("id")||0;this.currentBudgetId.set(+e),this.updateBudgetExpenseForm.patchValue({budget_id:+this.currentBudgetId()})})}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=b({type:r,selectors:[["app-update-budget-expense"]],viewQuery:function(e,o){if(e&1&&(B(oe,5),B(ae,5)),e&2){let a;f(a=h())&&(o.updateBudgetExpenseModal=a.first),f(a=h())&&(o.openUpdateBudgetExpenseModalBtn=a.first)}},inputs:{transactionId:[1,"transactionId"]},outputs:{updateBudgetExpenseResponse:"updateBudgetExpenseResponse"},decls:41,vars:1,consts:[["updateBudgetExpenseModal",""],["openUpdateBudgetExpenseModalBtn",""],["data-bs-backdrop","static","data-bs-keyboard","false","tabindex","-1",1,"modal","fade","update-budget-expense-modal"],[1,"modal-dialog","modal-dialog-centered"],[1,"modal-content"],[1,"modal-header"],[1,"modal-title","fs-5"],["type","button",1,"btn-close",3,"click"],[1,"modal-body"],[3,"formGroup"],["for","transaction_date"],["formControlName","transaction_date","id","transaction_date","type","date",1,"form-control"],["for","category_id"],["id","category_id","formControlName","category_id",1,"form-select"],["selected","","disabled",""],["value","1"],["value","2"],["value","3"],["for","description"],["formControlName","description","id","description","rows","3",1,"form-control","mb-3"],["for","amount"],[1,"input-group","mb-3"],[1,"input-group-text","fw-bold"],["formControlName","amount","id","amount","type","number","min","0",1,"form-control"],[1,"modal-footer"],["type","button",1,"btn","btn-secondary",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-sm","btn-warning","me-2",3,"click"]],template:function(e,o){if(e&1){let a=_();n(0,"div",2,0)(2,"div",3)(3,"div",4)(4,"div",5)(5,"h1",6),i(6," Update Budget Expense "),t(),n(7,"button",7),s("click",function(){return l(a),p(o.closeModal())}),t()(),n(8,"div",8)(9,"form",9)(10,"label",10),i(11,"Transaction Date"),t(),g(12,"input",11),n(13,"label",12),i(14,"Category"),t(),n(15,"select",13)(16,"option",14),i(17,"-- Select Category --"),t(),n(18,"option",15),i(19,"Education"),t(),n(20,"option",16),i(21,"Food"),t(),n(22,"option",17),i(23,"Transportation"),t()(),n(24,"label",18),i(25,"Description"),t(),g(26,"textarea",19),n(27,"label",20),i(28,"Amount"),t(),n(29,"div",21)(30,"span",22),i(31,"\u20B1"),t(),g(32,"input",23),t()()(),n(33,"div",24)(34,"button",25),s("click",function(){return l(a),p(o.closeModal())}),i(35," Close "),t(),n(36,"button",26),s("click",function(){return l(a),p(o.updateExpense())}),i(37,"Update Expense"),t()()()()(),n(38,"button",27,1),s("click",function(){return l(a),p(o.openModal())}),i(40,` Edit
`),t()}e&2&&(m(9),E("formGroup",o.updateBudgetExpenseForm))},dependencies:[Q,V,D,O,I,N,A,T,k,U,F,R],encapsulation:2})};function re(r,d){r&1&&(n(0,"tr")(1,"td",6),i(2," No budget expenses found. "),t()())}function se(r,d){if(r&1){let e=_();n(0,"tr")(1,"td"),i(2),t(),n(3,"td"),i(4),t(),n(5,"td"),i(6),t(),n(7,"td"),i(8),t(),n(9,"td")(10,"app-update-budget-expense",7),s("updateBudgetExpenseResponse",function(a){l(e);let u=S(2);return p(u.onBudgetExpenseUpdated(a))}),t(),n(11,"button",8),s("click",function(){let a=l(e).$implicit,u=S(2);return p(u.deleteBudgetExpense(a.transaction_id))}),i(12," Delete "),t()()()}if(r&2){let e=d.$implicit;m(2),w(e.transaction_date),m(2),w(e.description),m(2),w(e.category_id),m(2),J("\u20B1 ",e.amount),m(2),E("transactionId",e.transaction_id)}}function ue(r,d){if(r&1&&K(0,se,13,5,"tr",null,$),r&2){let e=S();z(e.budgetExpenses())}}var te=class r{mockupService=c(y);budgetExpenses=x([]);activatedRoute=c(v);budgetId=x("");ngOnInit(){this.getBudgetExpenses()}getBudgetExpenses(){let d=this.activatedRoute.snapshot.paramMap.get("id");this.mockupService.getMockBudgetTransactionsByBudgetId(Number(d)).subscribe(e=>{this.budgetExpenses.set(e)})}deleteBudgetExpense(d){this.mockupService.deleteMockBudgetTransaction(d).subscribe(()=>{this.getBudgetExpenses()})}onBudgetExpenseAdded(d){this.getBudgetExpenses()}onBudgetExpenseUpdated(d){this.getBudgetExpenses()}static \u0275fac=function(e){return new(e||r)};static \u0275cmp=b({type:r,selectors:[["app-view-budget"]],decls:28,vars:1,consts:[[1,"expenses-history-container"],[1,"title-actions-container"],[3,"addBudgetExpenseResponse"],[1,"expenses-table-container"],[1,"table"],["scope","col"],["colspan","5",1,"text-center"],[3,"updateBudgetExpenseResponse","transactionId"],[1,"btn","btn-sm","btn-danger",3,"click"]],template:function(e,o){e&1&&(g(0,"app-sidebar")(1,"app-header"),n(2,"main"),g(3,"app-kpi-panel"),n(4,"div",0)(5,"div",1)(6,"div")(7,"h4"),i(8,"Expenses History"),t()(),n(9,"div")(10,"app-add-budget-expense",2),s("addBudgetExpenseResponse",function(u){return o.onBudgetExpenseAdded(u)}),t()()(),n(11,"div",3)(12,"table",4)(13,"thead")(14,"tr")(15,"th",5),i(16,"Date"),t(),n(17,"th",5),i(18,"Description"),t(),n(19,"th",5),i(20,"Category"),t(),n(21,"th",5),i(22,"Amount"),t(),n(23,"th",5),i(24,"Actions"),t()()(),n(25,"tbody"),q(26,re,3,0,"tr")(27,ue,2,0),t()()()()()),e&2&&(m(26),H(o.budgetExpenses().length===0?26:27))},dependencies:[W,X,Y,P,j],styles:["main[_ngcontent-%COMP%]{margin-left:100px;background-color:#e8e9eb;padding:30px;height:100%;min-height:100vh;height:auto}.expenses-history-container[_ngcontent-%COMP%]{margin:30px 50px}.expenses-history-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]:nth-child(1){margin-bottom:10px}.title-actions-container[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:center}"]})};export{te as ViewBudget};
